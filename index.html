<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Randomized Enigma Codebook</title>
    <pre id="codebook-table" class="center"></pre>
    
    <script>
        function getRandomItem(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function shuffleArray(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function generateRandomPlugboard() {
            let letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
            shuffleArray(letters);
            let pairs = [];
            for (let i = 0; i < 10; i++) {
                pairs.push(letters[i * 2] + letters[i * 2 + 1]);
            }
            return pairs.join(" ");
        }

        function generateEnigmaCodebook() {
            const days = Array.from({ length: 31 }, (_, i) => (31 - i).toString().padStart(2, "0")); // 31 to 01

            const rotorTypes = ["I   ", "II  ", "III ", "IV  ", "V   ", "VI  ", "VII ", "VIII"];
            let table = "";

            // Header (Plugboard Header Enlarged by 4 Spaces)
            table += "+----+---------------------+----------------+-------------------------------+\n";
            table += "|Day |       Rotors        |    Ring Set    |     Plugboard Connections     |\n";
            table += "+----+---------------------+----------------+-------------------------------+\n";

            for (let i = 0; i < 31; i++) {
                let day = days[i];

                // Randomized Rotors
                let shuffledRotors = shuffleArray([...rotorTypes]);
                let rotors = shuffledRotors.slice(0, 4).join(" ");

                // Randomized Ring Settings (Each rotor gets a value between 01 and 26)
                let ringSettings = [
                    Math.floor(Math.random() * 26 + 1).toString().padStart(2, "0"),
                    Math.floor(Math.random() * 26 + 1).toString().padStart(2, "0"),
                    Math.floor(Math.random() * 26 + 1).toString().padStart(2, "0"),
                    Math.floor(Math.random() * 26 + 1).toString().padStart(2, "0")
                ].join("  ");

                // Randomized Plugboard
                let plugboard = generateRandomPlugboard();

                table += `| ${day} | ${rotors} | ${ringSettings} | ${plugboard} |\n`;
                table += "+----+---------------------+----------------+-------------------------------+\n";
            }

            document.getElementById("codebook-table").textContent = table;
        }

        generateEnigmaCodebook();
    </script>
</head>
<body>
</body>
</html>